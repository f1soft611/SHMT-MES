<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="StockInquiryDAO">

	<resultMap id="stockInquiryResult" type="egovframework.let.production.stock.domain.model.StockInquiry">
		<result property="itemSeq" column="itemSeq"/>
		<result property="itemNo" column="itemNo"/>
		<result property="itemName" column="itemName"/>
		<result property="whSeq" column="WHSeq"/>
		<result property="whName" column="WHName"/>
		<result property="stockQty" column="STOCKQTY"/>
		<result property="unit" column="unit"/>
	</resultMap>

	<!-- ERP DB의 프로시저를 호출하여 재고 목록 조회 -->
	<select id="StockInquiryDAO.selectStockList" parameterType="egovframework.let.production.stock.domain.model.StockInquiryVO" resultMap="stockInquiryResult">
		EXEC SHM_IF_SLGWHStockListQuery
			@DateFr = #{dateFr},
			@DateTo = #{dateTo},
			@ItemNo = <choose>
				<when test="itemNo != null and itemNo != ''">#{itemNo}</when>
				<otherwise>''</otherwise>
			</choose>
	</select>

	<!-- 재고 목록 총 건수 조회 (Java에서 처리하므로 사용되지 않음) -->
	<!-- ERP 프로시저가 페이징을 지원하지 않으므로, Service 계층에서 Java로 페이징 처리 -->
	<select id="StockInquiryDAO.selectStockListCount" parameterType="egovframework.let.production.stock.domain.model.StockInquiryVO" resultType="int">
		SELECT 0 AS count_placeholder
	</select>

</mapper>
